McBSP sample module (mcbsp_test.c)
_______________________________________

This is a sample kernel module, that is used to test McBSP kernel APIs.

To compile the module change to the examples/mcbsp and issue

make -C <kernel directory> M=`pwd` ARCH=arm CROSS_COMPILE=arm-none-linux-gnueabi-

For more information on compiling kernel module refer to Documentation/kbuild/modules.txt in kernel tree.

The test needs two EVMs connected via the Audio expansion slot.
One EVM acts  as master and the other as slave.
The same sample application can work for a master or slave device.
The module parameters have to be suitably altered.

Please note that the sample application has to be loaded at the slave end first
followed by master.

Some example cases are:

1] Transmit 5 packets each of size 1024 bytes from master to slave at
48kHz sampling frequency with word length as 32 and frame lenght as 2.
 
	Slave:
	insmod mcbsp_test.ko num_pkts=5 master=0 tx_rx=2

	Master:
	insmod mcbsp_test.ko num_pkts=5 master=1 tx_rx=1

2] Transmit 25 packets each of size 512 bytes from master to slave at
48kHz sampling frequency with word length as 32 and frame lenght as 2.
 
	Slave:
	insmod mcbsp_test.ko buf_size=512 num_pkts=25 master=0 tx_rx=2

	Master:
	insmod mcbsp_test.ko buf_size=512 num_pkts=25 master=1 tx_rx=1

3] Transmit 25 packets each of size 1024 bytes from master to slave at
48kHz sampling frequency with word length as 8 and frame lenght as 2.
 
	Slave:
	insmod mcbsp_test.ko word_len=8 num_pkts=25 master=0 tx_rx=2


	Master:
	insmod mcbsp_test.ko word_len=8 buf_size=512 num_pkts=25 master=1 tx_rx=1

Summarizing the frequently used  module params:
1] To decide master /slave mode		: master
2] For transmit or receive function	: tx_rx
3] Buffer size				: buf_size
4] Number of packets			: num_pkts
5] Sampling frequency			: freq
6] Frame length				: frame_len
7] Word length				: word_len
