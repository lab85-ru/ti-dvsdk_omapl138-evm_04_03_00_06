#############################################################################
# Makefile                                                                  #
#                                                                           #
# Top-level make for DSP Benchmark Demo                                     #
#############################################################################
#
#
#############################################################################
#                                                                           #
#   Copyright (C) 2010 Texas Instruments Incorporated                       #
#     http://www.ti.com/                                                    #
#                                                                           #
#############################################################################


include Rules.make


.PHONY:	all clean app app_clean install 

#==============================================================================
# The default build target.
#==============================================================================
all:	app

#==============================================================================
# Clean up the targets built by 'make all'.
#==============================================================================
clean:	app_clean 
#==============================================================================
# Build everything rebuildable.
#==============================================================================
everything: all

#==============================================================================
# Clean up all targets.
#==============================================================================
clobber:    clean

#==============================================================================
# A help message target.
#==============================================================================
help:
	@echo
	@echo "Available build targets are:"
	@echo
	@echo "    all             : Builds all the components below"
	@echo "    clean           : Remove files generated by the 'all' target"
	@echo
	@echo "    app             : Builds dsp benchmark demo for $(PLATFORM)"
	@echo "    app_clean       : Cleans example directory
	@echo "    install         : Install binaries to $(EXEC_DIR)"
	@echo

#==============================================================================
# Target for listing information about the DVSDK components.
#==============================================================================
info:	check
	@CODEGEN_INSTALL_DIR="$(CODEGEN_INSTALL_DIR)"
	@C6ACCEL_INSTALL_DIR="$(C6ACCEL_INSTALL_DIR)" 
	@CE_INSTALL_DIR="$(CE_INSTALL_DIR)"
	@CMEM_INSTALL_DIR="$(CMEM_INSTALL_DIR)"
	@LINK_INSTALL_DIR="$(LINK_INSTALL_DIR)" 

#==============================================================================
# Target for checking that the Rules.make file is set up properly.
#==============================================================================
check:
	@CHECKLIST="$(CHECKLIST)" $(DVSDK_INSTALL_DIR)/bin/check.sh

#==============================================================================
# Build the codec servers for the configured platform. Also, an
# explicit cleanup target is defined.
#==============================================================================
app:
	$(MAKE) -C $(DEMO_INSTALL_DIR)/dsp_benchmark_app

app_clean:
	$(MAKE) -C $(DEMO_INSTALL_DIR)/dsp_benchmark_app clean
	
install:
	@echo
	@echo Creating $(EXEC_DIR_DEMO)
	@mkdir -p $(EXEC_DIR_DEMO)
	@mkdir -p $(EXEC_DIR_DEMO)/test_files
	@install -d $(EXEC_DIR_DEMO)
	$(MAKE) -C $(DEMO_INSTALL_DIR)/dsp_benchmark_app install
	



