<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- --COPYRIGHT--,BSD
 *  Copyright (c) 2010, Texas Instruments Incorporated
 *  All rights reserved.
 *
 *  Redistribution and use in source and binary forms, with or without
 *  modification, are permitted provided that the following conditions
 *  are met:
 *
 *  *  Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *
 *  *  Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 *
 *  *  Neither the name of Texas Instruments Incorporated nor the names of
 *     its contributors may be used to endorse or promote products derived
 *     from this software without specific prior written permission.
 *
 *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 *  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
 *  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
 *  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR
 *  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
 *  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
 *  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS;
 *  OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 *  WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR
 *  OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 *  EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * --/COPYRIGHT--
-->
<html>
<head>
  <title>Codec Engine Example Build Instructions</title>
<!-- For now, we use the doxygen style sheet -->
  <link type="text/css" rel="stylesheet" href="../docs/html/doxygen.css">
</head>
<body>
<table width="100%">
  <tbody>
    <tr>
      <td bgcolor="black" width="1">
        <a href="http://www.ti.com">
          <img src="../docs/html/tilogo.gif" border="0" alt="Texas
	  Instruments">
        </a>
      </td>
      <td bgcolor="red">
        <img src="../docs/html/titagline.gif" alt="Technology for
	Innovators">
      </td>
    </tr>
  </tbody>
</table>
<h1>Build/Run Instructions for Codec Engine Examples</h1>
<hr>
<h2>General Information</h2>
<p>This page explains how to build the examples provided in the
Codec Engine (CE) product.
</p>
<p>Examples currently contain the simple pass-through (copy) codecs,
implemented in the XDM algorithm standard.
</p>
<p>More details are available at the
  <a href="http://tiexpressdsp.com/index.php?title=Codec_Engine_Examples">
   Codec Engine Examples Overview</a> wiki article.
</p>
<hr>
<h2>Requirements</h2>
<p>See the release notes for the specific software and hardware components this
release of Codec Engine has been validated against.
</p>
<hr>
<h2>Directory Structure</h2>
<p>This section describes the layout under the examples directory.  In
most cases, these examples are XDC packages, and there are links to
the autogenerated XDC documentation.  In some cases, the
examples are not proper XDC packages, and documentation is provided
in other means (see the specific example's directory).
</p>
<pre>
examples
    +---apps
    |   `---system_files        <span style="color: rgb(0, 164, 0);">Linux scripts describing which .ko's are required and how to load them for different platforms</span>
    |       +---DM355
    |       +---DM357
    |       +---DM6446
    |       +---DM6467
    |       +---OMAP2530
    |       +---OMAP3530
    |       `---OMAPL137
    `---ti
        `---sdo
            `---ce
                `---examples    <span style="color: rgb(0, 164, 0);">Buildable example codecs, DSP servers, and ARM and/or DSP apps</span>
                    +---codecs
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/auddec1_copy/package.html">auddec1_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/auddec1_ires/package.html">auddec1_ires</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/auddec_copy/package.html">auddec_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/audenc1_copy/package.html">audenc1_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/audenc_copy/package.html">audenc_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/g711/package.html">g711</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/imgdec1_copy/package.html">imgdec1_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/imgdec_copy/package.html">imgdec_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/imgenc1_copy/package.html">imgenc1_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/imgenc_copy/package.html">imgenc_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/scale/package.html">scale</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/sphdec1_copy/package.html">sphdec1_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/sphdec_copy/package.html">sphdec_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/sphenc1_copy/package.html">sphenc1_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/sphenc_copy/package.html">sphenc_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/universal_copy/package.html">universalcopy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/vidanalytics_copy/package.html">vidanalytics_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/viddec1_copy/package.html">viddec1_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/viddec2_copy/package.html">viddec2_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/viddec2split_copy/package.html">viddec2split_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/viddec_copy/package.html">viddec_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/videnc1_copy/package.html">videnc1_copy</a>
                    |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/videnc_copy/package.html">videnc_copy</a>
                    |   `---<a href="../xdoc/index.html#ti/sdo/ce/examples/codecs/vidtranscode_copy/package.html">vidtranscode_copy</a>
                    |
                    +---extensions
                    |   `---<a href="../xdoc/index.html#ti/sdo/ce/examples/extensions/scale/package.html">scale</a>
                    |
                    +---servers
                    |   `---<a href="../xdoc/index.html#ti/sdo/ce/examples/servers/all_codecs/package.html">all_codecs</a>
                    |
                    `---apps
                        +---audio1_copy
                        |   +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/audio1_copy/async/package.html">async</a>
                        |   `---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/audio1_copy/sync/package.html">sync</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/audio1_ires/package.html">audio1_ires</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/audio_copy/package.html">audio_copy</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/image1_copy/package.html">image1_copy</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/image_copy/package.html">image_copy</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/scale/package.html">scale</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/server_api_example/package.html">server_api_example</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/server_trace/package.html">server_trace</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/speech/package.html">speech</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/speech1_copy/package.html">speech1_copy</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/speech_copy/package.html">speech_copy</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/speech_copy_LAD/package.html">speech_copy_LAD</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/universal_copy/package.html">universal_copy</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/vidanalytics/package.html">vidanalytics</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/video1_copy/package.html">video1_copy</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/video2_copy/package.html">video2_copy</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/video2split_copy/package.html">video2split_copy</a>
                        +---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/video_copy/package.html">video_copy</a>
                        `---<a href="../xdoc/index.html#ti/sdo/ce/examples/apps/vidtranscode/package.html">vidtranscode</a>
</pre>

<hr>
<h2>Running the video_copy example application on the DM644x and DM6467 DVEVMs</h2>

<p>We assume you have your DVEVM properly set up, and that you
are able to mount an NFS.
</p>
<p>You must pass the <b><span style="color: rgb(204, 0, 0);">MEM=120M</span></b>
(or less than 120M) parameter to your Linux kernel from your u-boot
prompt, or you must have your Linux kernel configured to use no more
than 120MB of physical memory. Read more in the following sections
about the memory map.
</p>
<p>Copy the necessary files into a directory visible from the DVEVM board
(e.g. an NFS or hard drive mount, etc).  Those files are:
</p>
<ul>
  <li><b>dsplinkk.ko</b>, the pre-configured, pre-built DSP Link
  driver.</li>
  <li><b>cmemk.ko</b>, a Contiguous Memory allocator that allows
  allocation of physically contiguous buffers of arbitrary sizes (even
  several MB) on the GPP.</li>
  <li><b>loadmodules.sh</b> and <b>unloadmodules.sh</b>, example
  scripts for loading any necessary kernel modules.  Some platforms
  have different module dependencies than others, so the contents of
  these scripts may vary between platforms.</li>
</ul>
<p>Build the examples as described below, and copy into the same directory as
above the DSP server and GPP client executables (do it for simplicity;
the executables do not need to be in the same directory where kernel modules are, but the
executables themselves must sit in the same directory together).  For example,
to run the video_copy example, you need:<br>
</p>
<ul>
  <li><b>ti/sdo/ce/examples/servers/all_codecs/&lt;platform&gt;/all.x64P</b></li>
  <li><b>ti/sdo/ce/examples/apps/video_copy/&lt;platform&gt;/app_remote.xv5T</b></li>
</ul>
<p>Also copy the sample input video file to the same directory:<br>
</p>
<ul>
  <li><b>ti/sdo/ce/examples/apps/video_copy/&lt;platform&gt;/in.dat</b></li>
</ul>

<p>Boot the EVM, change to the directory where you have copied all
these files, and run<br>
&nbsp;&nbsp;&nbsp; <b>sh ./loadmodules.sh</b>
</p>
<p>This script installs drivers necessary for your device (e.g. CMEM and
Link) with appropriate information about the memory map.
</p>

<p>You can find more information below about the default memory map.
The CMEM module above is instructed to set aside two pools, one
containing 20 4K buffers, the other containing two 1MB buffers. This is
good enough for the video_copy application; your application will
likely need different settings.<br>
</p>
<p>When you run the script, you should see the following output:
</p>
<pre>
    $ ./loadmodules.sh
    cmem initialized 3 pools between 0x87800000 and 0x88000000
    dsplinkk: no version for "struct_module" found: kernel tainted.
    DSPLINK Module (1.61) created on Date: XXX XX XXXX Time: XX:XX:XX
</pre>
<p>Next, run the client application, which will automatically load the
DSP server image:</p>
<p>&nbsp;&nbsp;&nbsp; <b>./app.out</b><br>
</p>
<p>You will see several output lines:</p>
<pre>
    App-> Application started.
    CEapp-> Allocating contiguous buffer for 'input data' of size 1024...
    CEapp-> Contiguous buffer allocated OK (phys. addr=0x87fff000)
    CEapp-> Allocating contiguous buffer for 'encoded data' of size 1024...
    CEapp-> Contiguous buffer allocated OK (phys. addr=0x87ffe000)
    CEapp-> Allocating contiguous buffer for 'output data' of size 1024...
    CEapp-> Contiguous buffer allocated OK (phys. addr=0x87ffd000)
    App-> Processing frame 0...
    App-> Processing frame 1...
    App-> Processing frame 2...
    App-> Processing frame 3...
    App-> Processing frame 4...
    App-> Finished encoding and decoding 4 frames
    App-> Application finished successfully.
</pre>

<p>
To verify that the application has executed correctly, verify the
newly created <b>out.dat</b> file against the input <b>in.dat</b>
file. They should be identical.</p>


<hr>
<h2>Building the examples: step-by-step instructions</h2>
<h3>1. [Optional] Copy the entire "examples" tree out of the product</h3>
<p>
This step is optional, but recommended if you plan to modify the
samples in any way. It will ensure you have a backup copy of the
original examples, as provided by the Codec Engine product.
</p>
<p><i>Important</i>: throughout the rest of this document, we will use the
following notation:
</p>
<ul>
  <li><tt>&lt;CE_EXAMPLES_INSTALL_DIR&gt;</tt> - absolute path of the
  examples directory or the copy you made,
  e.g. <tt>/usr/work/examples</tt></li>
  <li><tt>&lt;CE_INSTALL_DIR&gt;</tt> - root directory of your Codec Engine
  installation. The original examples are in
  <tt>&lt;CE_INSTALL_DIR&gt;/examples</tt>.</li>
  <li><tt>&lt;BIOS_INSTALL_DIR&gt;</tt> - root directory of your DSP/BIOS
  installation.</li>
  <li><tt>&lt;XDC_INSTALL_DIR&gt;</tt> - root directory of your xdctools
  installation.</li>
  <li><i>directory/file</i> - position of the file relative to the
  examples directory; for examples, <tt>ti/sdo/ce/examples/codecs/makefile</tt> refers to
  <tt>&lt;CE_EXAMPLES_INSTALL_DIR&gt;ti/sdo/ce/examples/codecs/makefile</tt>.</li>
</ul>

<h3>2. Edit xdcpaths.mak to customize the build for your
software installation and your hardware</h3>
<p>
At the root of the Examples directory is a build-related file named
<b>xdcpaths.mak</b> that all Codec Engine example makefiles include.
All users must edit this file to specify where various software
components needed by Codec Engine are on their system, and often to
narrow the list of hardware platforms to build for (thereby reducing
the example build time and possibly the scope of external components).
</p>
<p>
The variables defined in <b>xdcpaths.mak</b> that most users must
assign are:  <tt>DEVICES</tt>, <tt>GPPOS</tt>, <tt>PROGRAMS</tt>, and
various <tt>*_INSTALL_DIR</tt> variables.  Each are described more
below as well as in comments throughout the <b>xdcpaths.mak</b> file.
</p>
<p>
Advanced users will note that these GNU make-based variables can be
overridden on the command line.  As a result, it is possible to tailor
these makefiles without modifying them - by simply setting the variables
on the command line when running "gmake".
</p>

<h4>2.1 xdcpaths.mak's DEVICES variable</h4>
<p>
The <tt>DEVICES</tt> variable indicates which hardware platforms should be
built for.  Most users are only interested in building for a single
platform, and the other platforms can be removed from the <tt>DEVICES</tt>
variable.
</p>
<p>
Note that there is a one-to-one mapping between the "short name" in the
<tt>DEVICES</tt> macro and the "platform package" which is used.  For
example, the <tt>OMAP3530</tt> value in <tt>DEVICES</tt> maps to the
<tt>ti.platforms.evmOMAP3530</tt> platform package.
</p>

<h4>2.2 xdcpaths.mak's GPPOS variable</h4>
<p>
The <tt>GPPOS</tt> variable indicates which GPP (General Purpose Processor,
often an ARM) OS's should be built for.  Most users are only interested in
building for a single GPP OS (e.g. WinCE or Linux glibc or Linux uClibc),
and the other GPP OS's can be removed from the <tt>GPPOS</tt> variable.
<p>
Note that there is a one-to-one mapping between the "short name" in the
<tt>GPPOS</tt> macro and the "target module" which is used.  For
example, the <tt>WINCE</tt> value in <tt>GPPOS</tt> maps to the
<tt>microsoft.targets.arm.WinCE</tt> target Module.
</p>

<h4>2.3 xdcpaths.mak's PROGRAMS variable</h4>
<p>
The <tt>PROGRAMS</tt> variable indicates roughly which system architecture
the examples should be built for.  Generally, Codec Engine supports "local"
and "remote" codecs, and as a result there are 3 types of executables that
can be built - <tt>APP_LOCAL</tt>, <tt>APP_CLIENT</tt> and
<tt>DSP_SERVER</tt>.</p>
<p>
<tt>APP_LOCAL</tt> indicates that all examples that support the apps and
codecs running on the same processor should be built.  This is typically
set for single core devices (e.g. DM365, DM6437), but can als be set for
multi-core devices (e.g. OMAP3530, DM6446) where the app and codec run on
either the GPP or the DSP.
</p>
<p>
<tt>APP_CLIENT</tt> and <tt>DSP_SERVER</tt> typically go together, and
indicate that all examples that support remote execution of codecs should
be built.  If <tt>DSP_SERVER</tt> is set in the <tt>PROGRAMS</tt> variable
and an appropriate multi-core platform is set in the <tt>DEVICES</tt>
variable, the examples in <b>examples/ti/sdo/ce/examples/servers</b> may be
built.  <tt>APP_CLIENT</tt> indicates the "client" side of a "client/server"
system, so GPP-side apps will be built (for the appropriate GPP OS's and
hardware platforms set in <tt>GPPOS</tt> and <tt>DEVICES</tt> respectively).
<p>
Note that you can set all 3 (<tt>APP_LOCAL</tt>, <tt>APP_CLIENT</tt>, and
<tt>DSP_SERVER</tt>) or any subset of them.  As a further example, if only
<tt>DSP_SERVER</tt> is set, no applications will be built, but all
components required to create a server (including codecs) will be built.
</p>
<h4>2.4 xdcpaths.mak's various *_INSTALL_DIR, CGTOOLS_* and CC_* variables</h4>
<p>
The <b>xdcpaths.mak</b> file also contains variables to indicate where
products which Codec Engine may depend on are installed.  The list of
dependent products is a direct result of what values are assigned in the
<tt>DEVICES</tt>, <tt>GPPOS</tt> and <tt>PROGRAMS</tt> variables.  For
example, if you've set <tt>PROGRAMS</tt> to only <tt>APP_LOCAL</tt>,
<tt>DEVICES</tt> to only <tt>DM355</tt>, and <tt>GPP_OS</tt> to
<tt>LINUX_UCLIBC</tt>, you aren't required to provide
<tt>DSPLINK_INSTALL_DIR</tt>, <tt>BIOS_INSTALL_DIR</tt>,
<tt>CGTOOLS_V5T</tt> or <tt>CC_V5T</tt>
</p>
<p>
Further, if you're using a "full" installation of Codec Engine (see
<a href="http://tiexpressdsp.com/index.php?title=Codec_Engine_FAQ#Why_do_some_distributions_have_a_cetools_directory_and_others_don.27t.3F">
http://tiexpressdsp.com/index.php?title=Codec_Engine_FAQ#Why_do_some_distributions_have_a_cetools_directory_and_others_don.27t.3F</a>
for more details), many of the dependencies will be "auto-assigned" for you
to the <b>cetools/packages</b> directory.
</p>
<p>
Please refer to the comments throughout <b>xdcpaths.mak</b> for more
details.
</p>

<p>
Each directory contains a GNU <tt>makefile</tt> which enables you to build
the sample in the current directory.  Top-level directories also
contain a <tt>makefile</tt> which steps into subdirectories and builds
all the examples under the parent directory.
<p>FYI, the xdcpaths.mak file is included by the individual makefiles
for all the example codecs, servers, and applications.</p>
<p>Please keep in mind that <b><span style="color: rgb(153, 0, 0);">MOST
BUILD TROUBLES OCCUR WHEN ONE OF THE VARIOUS <tt>*_INSTALL_DIR</tt>
VARIABLES ARE INCORRECT!</span></b>
Make sure there are no extra spaces (check the end of lines!), that every
individual path (segment separated by the semicolon) is correct, character
for character, and the build process is very likely to go smoothly.
</p>


<h3>3. Build example codecs</h3>
<p>Change directory to <b>ti/sdo/ce/examples/codecs</b> and type</p>
<p>&nbsp;&nbsp;&nbsp; <b>gmake clean<br>
&nbsp;&nbsp;&nbsp; gmake</b></p>

<p>Alternatively, you can change into a specific codec's directory
(e.g. <b>ti/sdo/ce/examples/codecs/viddec_copy</b>), and type</p>
<p>&nbsp;&nbsp;&nbsp; <b>gmake clean<br>
&nbsp;&nbsp;&nbsp; gmake</b></p>


<h3>4. Build example extensions</h3>
<p>Change directory to <b>ti/sdo/ce/examples/extensions</b> and type</p>
<p>&nbsp;&nbsp;&nbsp; <b>gmake clean<br>
&nbsp;&nbsp;&nbsp; gmake</b></p>

<p>Alternatively, you can change into a specific example extension directory
(e.g. <b>ti/sdo/ce/examples/extensions/scale</b>), and type</p>
<p>&nbsp;&nbsp;&nbsp; <b>gmake clean<br>
&nbsp;&nbsp;&nbsp; gmake</b></p>


<h3>5. Build example DSP servers</h3>
<p>Note that this is only necessary for dual processor environments,
like DM6446.</p>
<p>Change directory to <tt>ti/sdo/ce/examples/servers</tt> and type</p>
<p>&nbsp;&nbsp;&nbsp; <b>gmake clean<br>
&nbsp;&nbsp;&nbsp; gmake<br>
</b></p>
<p>Alternatively, you can change into a specific server's directory
(e.g. <tt>ti/sdo/ce/examples/servers/video_copy</tt>), and type</p>
<p>&nbsp;&nbsp;&nbsp; <b>gmake clean<br>
&nbsp;&nbsp;&nbsp; gmake<br>
</b></p>
<p>Note: when developing your own codecs and applications, you will
likely take one of the DSP server sample and modify it to suit your
needs.
These are the source files for this server application that you need to
know about:
</p>
<ul>
  <li>*.cfg:  Configuration script that determines what codecs
should be included in the server, and how some of the components
(e.g. DSKT2 and DMAN3) will be configured.</li>
  <li>*.tcf:  TConf file for the app.  It is often set to allow for a
generous heap and static code and data.  Be very
careful with changing the memory map.</li>
  <li>main.c: generic main()</li>
  <li>link.cmd: application specific linker command file.</li>
</ul>

<h3>6. Build the GPP applications</h3>
<p>Change directory to <tt>ti/sdo/ce/examples/apps</tt>
(where the makefile is) and type</p>
<p>&nbsp;&nbsp;&nbsp; <b>gmake clean<br>
&nbsp;&nbsp;&nbsp; gmake</b>
</p>

<h3>7. Copy files to the target and run</h3>
<p>For a given application you want to run, you need to copy that application's
executable to the target, and if your application requires a DSP server, you
need to copy that DSP server to the target as well. (You can see which DSP
server -- a DSP binary with .x64P or .x674 extension -- is required by the
application if you look at the application's .cfg file.) In addition, you
should copy the input data file "in.dat" to the target, keeping the relative
position between the application executable and the in.dat file.
</p>

<p>
Also, you must make sure that all the required kernel modules (.ko's) for
your target are loaded (tyically via the loadmodules.sh shell script.)
</p>

<p>
<b>Example 1:</b> Running the audio_copy example on evmDM6446:<br>
Assuming you included <tt>DM6446</tt> in <tt>DEVICES</tt>,
<tt>LINUX_GLIBC</tt> in <tt>GPPOS</tt> and <tt>APP_CLIENT</tt> in
<tt>PROGRAMS</tt>, the ARM-side of the audio_copy example for evmDM6446 will
be built into the
<b>examples/ti/sdo/ce/examples/apps/audio_copy/bin/ti_platforms_evmDM6446</b>
directory.
Copy the <b>app_remote.xv5T</b> file to the target, along with <b>in.dat</b>
-- which is in the same directory, so on the target both files should be in
the same directory, as well.
<br><br>The <b>remote.cfg</b> file in that directory lists "all.x64P" as its
DSP server image, so you must copy the <b>all.x64P</b> DSP executable for
evmDM6446 from <b>examples/ti/sdo/ce/examples/servers</b> (more precisely
from
<b>examples/ti/sdo/ce/examples/servers/all_codecs/bin/ti_platforms_evmDM6446/</b>)
to the target, in the same directory where the ARM-side executable is.
</p>

<p>
<b>Example 2:</b> Running the video1_copy example on evmDM355:<br>
The evmDM355 only has the ARM, so we don't copy any DSP files on the target.
From the build directory <b>ti/sdo/ce/examples/apps/video1_copy/</b> we copy
<b>bin/ti_platforms_evmDM355/app_local.xv5T</b> on the target, and the
<b>in.dat</b> file as well, making sure in.dat is in the same directory on
the target as the ARM executable.
</p>

<hr>
<h2>Memory map</h2>
For information on the default DM6446 memory map -- as addressed by the kernel module
loading scripts and DSP/BIOS configuration files (.tcf scripts) -- and
instructions on how to change this map, please refer to
<a href="http://tiexpressdsp.com/index.php?title=Changing_the_DVEVM_memory_map">
http://tiexpressdsp.com/index.php?title=Changing_the_DVEVM_memory_map</a>


<hr>
<p>
Last updated: December 2, 2010
</p>
</body>
</html>
